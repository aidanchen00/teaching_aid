/* Immersive Voice Overlay */
.voice-overlay {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 1000;
  transition: all 0.5s ease;
}

/* Compact Top-Left Transcript Panel */
.transcript-panel {
  position: absolute;
  left: 20px;
  top: 80px;
  width: 280px;
  max-height: 220px;
  background: linear-gradient(
    135deg,
    rgba(12, 20, 35, 0.92) 0%,
    rgba(8, 14, 28, 0.95) 100%
  );
  border: 1px solid rgba(0, 200, 255, 0.12);
  border-radius: 14px;
  backdrop-filter: blur(16px);
  box-shadow:
    0 10px 40px rgba(0, 0, 0, 0.4),
    0 0 30px rgba(0, 200, 255, 0.05),
    inset 0 1px 0 rgba(255, 255, 255, 0.03);
  opacity: 0;
  pointer-events: auto;
  transform: translateX(-15px) scale(0.95);
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  overflow: hidden;
}

.transcript-panel.visible {
  opacity: 1;
  transform: translateX(0) scale(1);
}

.transcript-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 14px;
  border-bottom: 1px solid rgba(0, 200, 255, 0.08);
  background: rgba(0, 200, 255, 0.02);
}

.transcript-title {
  font-size: 0.6rem;
  color: rgba(140, 180, 220, 0.4);
  text-transform: uppercase;
  letter-spacing: 1.5px;
  font-weight: 500;
}

/* Agent Status Indicator */
.agent-status {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 4px 10px;
  border-radius: 12px;
  background: rgba(0, 0, 0, 0.25);
  border: 1px solid rgba(100, 150, 200, 0.15);
  transition: all 0.3s ease;
}

.agent-icon {
  font-size: 0.75rem;
}

.agent-label {
  font-size: 0.65rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.8px;
  color: rgba(180, 200, 220, 0.7);
}

.agent-dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: rgba(100, 150, 200, 0.5);
  transition: all 0.3s ease;
}

/* Agent State Colors */
.agent-status.idle {
  border-color: rgba(100, 120, 150, 0.3);
}
.agent-status.idle .agent-dot {
  background: rgba(100, 120, 150, 0.5);
}

.agent-status.ready {
  border-color: rgba(0, 255, 200, 0.3);
}
.agent-status.ready .agent-dot {
  background: rgba(0, 255, 200, 0.7);
  box-shadow: 0 0 10px rgba(0, 255, 200, 0.5);
}

.agent-status.listening {
  border-color: rgba(0, 180, 255, 0.4);
  background: rgba(0, 180, 255, 0.1);
}
.agent-status.listening .agent-label {
  color: rgba(100, 200, 255, 1);
}
.agent-status.listening .agent-dot {
  background: rgba(0, 180, 255, 1);
  box-shadow: 0 0 12px rgba(0, 180, 255, 0.6);
  animation: pulseDot 1s ease-in-out infinite;
}

.agent-status.thinking {
  border-color: rgba(255, 180, 80, 0.4);
  background: rgba(255, 180, 80, 0.1);
}
.agent-status.thinking .agent-label {
  color: rgba(255, 200, 120, 1);
}
.agent-status.thinking .agent-dot {
  background: rgba(255, 180, 80, 1);
  box-shadow: 0 0 12px rgba(255, 180, 80, 0.6);
  animation: pulseDot 0.6s ease-in-out infinite;
}

.agent-status.speaking {
  border-color: rgba(0, 255, 180, 0.4);
  background: rgba(0, 255, 180, 0.1);
}
.agent-status.speaking .agent-label {
  color: rgba(100, 255, 200, 1);
}
.agent-status.speaking .agent-dot {
  background: rgba(0, 255, 180, 1);
  box-shadow: 0 0 12px rgba(0, 255, 180, 0.6);
  animation: pulseDot 0.8s ease-in-out infinite;
}

@keyframes pulseDot {
  0%, 100% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.3); opacity: 0.7; }
}

/* Transcript Content */
.transcript-content {
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  max-height: calc(220px - 50px);
  overflow-y: auto;
}

.transcript-content::-webkit-scrollbar {
  width: 3px;
}

.transcript-content::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.15);
  border-radius: 3px;
}

.transcript-content::-webkit-scrollbar-thumb {
  background: rgba(0, 200, 255, 0.25);
  border-radius: 3px;
}

.transcript-message {
  display: flex;
  flex-direction: column;
  gap: 4px;
  animation: messageSlideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes messageSlideIn {
  from {
    opacity: 0;
    transform: translateY(6px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.message-label {
  font-size: 0.55rem;
  text-transform: uppercase;
  letter-spacing: 1.2px;
  font-weight: 600;
}

.transcript-message.user .message-label {
  color: rgba(0, 180, 255, 0.6);
}

.transcript-message.assistant .message-label {
  color: rgba(0, 255, 180, 0.6);
}

.message-text {
  font-size: 0.8rem;
  line-height: 1.5;
  color: rgba(230, 245, 255, 0.85);
  padding: 10px 12px;
  border-radius: 10px;
  position: relative;
}

.transcript-message.user .message-text {
  background: linear-gradient(
    135deg,
    rgba(0, 100, 180, 0.18) 0%,
    rgba(0, 80, 150, 0.12) 100%
  );
  border: 1px solid rgba(0, 180, 255, 0.15);
  font-style: italic;
}

.transcript-message.assistant .message-text {
  background: linear-gradient(
    135deg,
    rgba(0, 120, 100, 0.12) 0%,
    rgba(0, 100, 80, 0.08) 100%
  );
  border: 1px solid rgba(0, 255, 180, 0.12);
}

/* Ambient edge glow when active */
.voice-overlay::before {
  content: '';
  position: absolute;
  inset: 0;
  opacity: 0;
  transition: opacity 0.5s ease;
}

.voice-overlay.active::before {
  opacity: 1;
  background:
    radial-gradient(ellipse at bottom center, rgba(0, 255, 200, 0.06) 0%, transparent 50%),
    radial-gradient(ellipse at top, rgba(0, 0, 0, 0.3) 0%, transparent 50%);
}

.voice-overlay.listening::before {
  opacity: 1;
  background:
    radial-gradient(ellipse at bottom center, rgba(0, 180, 255, 0.1) 0%, transparent 50%),
    radial-gradient(ellipse at top, rgba(0, 0, 0, 0.4) 0%, transparent 50%);
  animation: ambientBreath 2s ease-in-out infinite;
}

.voice-overlay.speaking::before {
  opacity: 1;
  background:
    radial-gradient(ellipse at bottom center, rgba(0, 255, 180, 0.08) 0%, transparent 50%),
    radial-gradient(ellipse at top, rgba(0, 0, 0, 0.3) 0%, transparent 50%);
  animation: ambientBreath 2.5s ease-in-out infinite;
}

@keyframes ambientBreath {
  0%, 100% { opacity: 0.7; }
  50% { opacity: 1; }
}

/* Bottom control area */
.voice-bottom-area {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding-bottom: 50px;
  pointer-events: none;
}

/* Waveform visualization */
.voice-waveform {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
  height: 80px;
  margin-bottom: 24px;
  opacity: 0;
  transform: scaleY(0.5);
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.voice-overlay.listening .voice-waveform,
.voice-overlay.speaking .voice-waveform {
  opacity: 1;
  transform: scaleY(1);
}

.wave-bar {
  width: 4px;
  background: linear-gradient(to top, rgba(0, 255, 200, 0.9), rgba(0, 200, 255, 0.5));
  border-radius: 4px;
  height: 20px;
  box-shadow: 0 0 10px rgba(0, 255, 200, 0.3);
}

.voice-overlay.listening .wave-bar {
  animation: waveListening 0.6s ease-in-out infinite;
  background: linear-gradient(to top, rgba(0, 180, 255, 1), rgba(100, 150, 255, 0.6));
  box-shadow: 0 0 15px rgba(0, 180, 255, 0.4);
}

.voice-overlay.speaking .wave-bar {
  animation: waveSpeaking 0.4s ease-in-out infinite;
  background: linear-gradient(to top, rgba(0, 255, 180, 1), rgba(0, 255, 220, 0.6));
  box-shadow: 0 0 15px rgba(0, 255, 180, 0.4);
}

.wave-bar:nth-child(1) { animation-delay: 0s; }
.wave-bar:nth-child(2) { animation-delay: 0.08s; }
.wave-bar:nth-child(3) { animation-delay: 0.16s; }
.wave-bar:nth-child(4) { animation-delay: 0.12s; }
.wave-bar:nth-child(5) { animation-delay: 0.04s; }
.wave-bar:nth-child(6) { animation-delay: 0.2s; }
.wave-bar:nth-child(7) { animation-delay: 0.1s; }
.wave-bar:nth-child(8) { animation-delay: 0.18s; }
.wave-bar:nth-child(9) { animation-delay: 0.06s; }
.wave-bar:nth-child(10) { animation-delay: 0.14s; }
.wave-bar:nth-child(11) { animation-delay: 0.02s; }
.wave-bar:nth-child(12) { animation-delay: 0.1s; }
.wave-bar:nth-child(13) { animation-delay: 0.22s; }
.wave-bar:nth-child(14) { animation-delay: 0.08s; }
.wave-bar:nth-child(15) { animation-delay: 0.16s; }

@keyframes waveListening {
  0%, 100% { height: 12px; opacity: 0.4; }
  50% { height: 60px; opacity: 1; }
}

@keyframes waveSpeaking {
  0%, 100% { height: 15px; opacity: 0.5; }
  50% { height: 50px; opacity: 1; }
}

/* Old floating text display - hidden, replaced by left panel */
.voice-text-display {
  display: none;
}

/* Main orb button */
.voice-orb-container {
  position: relative;
  pointer-events: auto;
}

.voice-orb {
  width: 72px;
  height: 72px;
  border-radius: 50%;
  background:
    radial-gradient(circle at 30% 30%, rgba(40, 60, 80, 0.95), rgba(15, 25, 40, 0.98));
  border: 2px solid rgba(0, 200, 255, 0.25);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  box-shadow:
    0 0 40px rgba(0, 200, 255, 0.15),
    0 10px 40px rgba(0, 0, 0, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.1),
    inset 0 -5px 20px rgba(0, 0, 0, 0.2);
}

.voice-orb::before {
  content: '';
  position: absolute;
  inset: -3px;
  border-radius: 50%;
  background: conic-gradient(
    from 0deg,
    transparent 0deg,
    rgba(0, 200, 255, 0.3) 60deg,
    transparent 120deg,
    rgba(0, 255, 200, 0.3) 180deg,
    transparent 240deg,
    rgba(0, 200, 255, 0.3) 300deg,
    transparent 360deg
  );
  opacity: 0;
  transition: opacity 0.4s ease;
  animation: orbRotate 8s linear infinite;
}

@keyframes orbRotate {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.voice-orb:hover::before {
  opacity: 1;
}

.voice-orb:hover {
  transform: scale(1.08);
  border-color: rgba(0, 255, 200, 0.4);
  box-shadow:
    0 0 60px rgba(0, 255, 200, 0.25),
    0 15px 50px rgba(0, 0, 0, 0.4),
    inset 0 1px 0 rgba(255, 255, 255, 0.15),
    inset 0 -5px 25px rgba(0, 0, 0, 0.25);
}

.voice-orb:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.voice-orb svg {
  width: 28px;
  height: 28px;
  color: rgba(0, 220, 255, 0.85);
  transition: all 0.4s ease;
  z-index: 2;
  filter: drop-shadow(0 0 8px rgba(0, 220, 255, 0.4));
}

/* Orb rings */
.orb-ring {
  position: absolute;
  border-radius: 50%;
  border: 1px solid rgba(0, 200, 255, 0.2);
  opacity: 0;
  pointer-events: none;
}

.orb-ring-1 {
  width: 100px;
  height: 100px;
  top: -14px;
  left: -14px;
}

.orb-ring-2 {
  width: 130px;
  height: 130px;
  top: -29px;
  left: -29px;
}

.orb-ring-3 {
  width: 160px;
  height: 160px;
  top: -44px;
  left: -44px;
}

/* Listening state */
.voice-orb.listening {
  border-color: rgba(0, 180, 255, 0.6);
  background:
    radial-gradient(circle at 30% 30%, rgba(0, 60, 100, 0.95), rgba(0, 30, 60, 0.98));
  box-shadow:
    0 0 70px rgba(0, 180, 255, 0.35),
    0 15px 50px rgba(0, 0, 0, 0.4),
    inset 0 0 30px rgba(0, 180, 255, 0.15);
}

.voice-orb.listening::before {
  opacity: 1;
  background: conic-gradient(
    from 0deg,
    transparent 0deg,
    rgba(0, 180, 255, 0.5) 90deg,
    transparent 180deg,
    rgba(0, 180, 255, 0.5) 270deg,
    transparent 360deg
  );
  animation: orbRotate 3s linear infinite;
}

.voice-orb.listening svg {
  color: rgba(100, 200, 255, 1);
  filter: drop-shadow(0 0 12px rgba(100, 200, 255, 0.6));
  animation: micFloat 1.5s ease-in-out infinite;
}

.voice-orb.listening .orb-ring {
  opacity: 1;
  animation: ringPulse 2s ease-out infinite;
  border-color: rgba(0, 180, 255, 0.4);
}

.voice-orb.listening .orb-ring-2 {
  animation-delay: 0.4s;
}

.voice-orb.listening .orb-ring-3 {
  animation-delay: 0.8s;
}

@keyframes micFloat {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-2px); }
}

@keyframes ringPulse {
  0% {
    transform: scale(0.9);
    opacity: 0.5;
  }
  100% {
    transform: scale(1.4);
    opacity: 0;
  }
}

/* Processing state */
.voice-orb.processing {
  border-color: rgba(255, 180, 80, 0.5);
  background:
    radial-gradient(circle at 30% 30%, rgba(80, 60, 30, 0.95), rgba(40, 30, 15, 0.98));
  box-shadow:
    0 0 50px rgba(255, 180, 80, 0.25),
    0 15px 50px rgba(0, 0, 0, 0.4),
    inset 0 0 30px rgba(255, 180, 80, 0.1);
}

.voice-orb.processing::before {
  opacity: 1;
  background: conic-gradient(
    from 0deg,
    rgba(255, 180, 80, 0.6) 0deg,
    transparent 90deg,
    rgba(255, 180, 80, 0.6) 180deg,
    transparent 270deg
  );
  animation: orbRotate 1.5s linear infinite;
}

.voice-orb.processing svg {
  color: rgba(255, 200, 120, 0.9);
  filter: drop-shadow(0 0 10px rgba(255, 200, 120, 0.5));
  animation: thinking 1.2s ease-in-out infinite;
}

@keyframes thinking {
  0%, 100% { opacity: 0.6; transform: scale(0.95); }
  50% { opacity: 1; transform: scale(1.05); }
}

/* Speaking state */
.voice-orb.speaking {
  border-color: rgba(0, 255, 180, 0.5);
  background:
    radial-gradient(circle at 30% 30%, rgba(0, 80, 60, 0.95), rgba(0, 40, 35, 0.98));
  box-shadow:
    0 0 70px rgba(0, 255, 180, 0.3),
    0 15px 50px rgba(0, 0, 0, 0.4),
    inset 0 0 30px rgba(0, 255, 180, 0.15);
}

.voice-orb.speaking::before {
  opacity: 1;
  background: conic-gradient(
    from 0deg,
    transparent 0deg,
    rgba(0, 255, 180, 0.4) 45deg,
    transparent 90deg,
    rgba(0, 255, 180, 0.4) 135deg,
    transparent 180deg,
    rgba(0, 255, 180, 0.4) 225deg,
    transparent 270deg,
    rgba(0, 255, 180, 0.4) 315deg,
    transparent 360deg
  );
  animation: orbRotate 4s linear infinite;
}

.voice-orb.speaking svg {
  color: rgba(100, 255, 200, 1);
  filter: drop-shadow(0 0 12px rgba(100, 255, 200, 0.6));
}

.voice-orb.speaking .orb-ring {
  opacity: 1;
  border-color: rgba(0, 255, 180, 0.3);
  animation: speakingRingPulse 1.8s ease-in-out infinite;
}

.voice-orb.speaking .orb-ring-2 {
  animation-delay: 0.3s;
}

.voice-orb.speaking .orb-ring-3 {
  animation-delay: 0.6s;
}

@keyframes speakingRingPulse {
  0%, 100% {
    transform: scale(1);
    opacity: 0.3;
  }
  50% {
    transform: scale(1.08);
    opacity: 0.5;
  }
}

/* Status hint */
.voice-hint {
  position: absolute;
  bottom: -32px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 0.7rem;
  color: rgba(140, 180, 200, 0.5);
  white-space: nowrap;
  text-transform: uppercase;
  letter-spacing: 3px;
  transition: all 0.3s ease;
  font-weight: 500;
}

.voice-orb:hover .voice-hint {
  color: rgba(0, 255, 200, 0.7);
}

.voice-orb.listening .voice-hint,
.voice-orb.speaking .voice-hint {
  color: rgba(200, 230, 255, 0.6);
}

/* Floating particles */
.voice-particles {
  position: absolute;
  width: 250px;
  height: 250px;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.6s ease;
}

.voice-overlay.listening .voice-particles,
.voice-overlay.speaking .voice-particles {
  opacity: 1;
}

.particle {
  position: absolute;
  width: 4px;
  height: 4px;
  background: rgba(0, 255, 200, 0.7);
  border-radius: 50%;
  box-shadow: 0 0 10px rgba(0, 255, 200, 0.5);
}

.voice-overlay.listening .particle {
  background: rgba(0, 180, 255, 0.8);
  box-shadow: 0 0 12px rgba(0, 180, 255, 0.6);
  animation: particleOrbit 4s ease-in-out infinite;
}

.voice-overlay.speaking .particle {
  background: rgba(0, 255, 180, 0.8);
  box-shadow: 0 0 12px rgba(0, 255, 180, 0.6);
  animation: particleFloat 3s ease-in-out infinite;
}

.particle:nth-child(1) { top: 10%; left: 50%; animation-delay: 0s; }
.particle:nth-child(2) { top: 25%; left: 85%; animation-delay: 0.5s; }
.particle:nth-child(3) { top: 50%; left: 95%; animation-delay: 1s; }
.particle:nth-child(4) { top: 75%; left: 85%; animation-delay: 1.5s; }
.particle:nth-child(5) { top: 90%; left: 50%; animation-delay: 2s; }
.particle:nth-child(6) { top: 75%; left: 15%; animation-delay: 2.5s; }
.particle:nth-child(7) { top: 50%; left: 5%; animation-delay: 3s; }
.particle:nth-child(8) { top: 25%; left: 15%; animation-delay: 3.5s; }

@keyframes particleOrbit {
  0%, 100% {
    transform: translateY(0) scale(1);
    opacity: 0.3;
  }
  50% {
    transform: translateY(-15px) scale(1.3);
    opacity: 0.9;
  }
}

@keyframes particleFloat {
  0%, 100% {
    transform: translate(0, 0) scale(1);
    opacity: 0.4;
  }
  25% {
    transform: translate(5px, -10px) scale(1.2);
    opacity: 0.8;
  }
  50% {
    transform: translate(-5px, -15px) scale(1);
    opacity: 0.6;
  }
  75% {
    transform: translate(-10px, -5px) scale(1.1);
    opacity: 0.7;
  }
}

/* Responsive */
@media (max-width: 1024px) {
  .transcript-panel {
    width: 260px;
    left: 14px;
  }
}

@media (max-width: 768px) {
  .transcript-panel {
    left: 10px;
    right: auto;
    width: 240px;
    top: 70px;
    max-height: 180px;
  }

  .transcript-panel.visible {
    transform: translateX(0) scale(1);
  }

  .transcript-content {
    max-height: calc(180px - 45px);
    padding: 10px;
    gap: 8px;
  }

  .message-text {
    font-size: 0.75rem;
    padding: 8px 10px;
  }

  .voice-orb {
    width: 64px;
    height: 64px;
  }

  .voice-orb svg {
    width: 24px;
    height: 24px;
  }

  .voice-waveform {
    gap: 3px;
  }

  .wave-bar {
    width: 3px;
  }
}
